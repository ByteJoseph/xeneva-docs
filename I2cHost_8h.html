<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>XenevaOS: XenevaOS/Boot/include/Protocol/I2cHost.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">XenevaOS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_6f7cbf0a11b44b0a43b1ec16e930d793.html">XenevaOS</a></li><li class="navelem"><a class="el" href="dir_e155a64606be01e9718a8b1197c63fff.html">Boot</a></li><li class="navelem"><a class="el" href="dir_08690fdcb6b3138c931f33749be09044.html">include</a></li><li class="navelem"><a class="el" href="dir_b641ebb3d870e3bbb06aca4db697d2ea.html">Protocol</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">I2cHost.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="PiI2c_8h_source.html">Pi/PiI2c.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for I2cHost.h:</div>
<div class="dyncontent">
<div class="center"><img src="I2cHost_8h__incl.png" border="0" usemap="#aXenevaOS_2Boot_2include_2Protocol_2I2cHost_8h" alt=""/></div>
<map name="aXenevaOS_2Boot_2include_2Protocol_2I2cHost_8h" id="aXenevaOS_2Boot_2include_2Protocol_2I2cHost_8h">
<area shape="rect" title=" " alt="" coords="5,5,180,45"/>
<area shape="rect" href="PiI2c_8h.html" title=" " alt="" coords="52,93,133,119"/>
<area shape="poly" title=" " alt="" coords="95,46,95,79,90,79,90,46"/>
</map>
</div>
</div>
<p><a href="I2cHost_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__EFI__I2C__HOST__PROTOCOL.html">_EFI_I2C_HOST_PROTOCOL</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a7c386cec560a7c06ec6d22c97f0d98f3" id="r_a7c386cec560a7c06ec6d22c97f0d98f3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="I2cHost_8h.html#a7c386cec560a7c06ec6d22c97f0d98f3">EFI_I2C_HOST_PROTOCOL_GUID</a>&#160;&#160;&#160;{ 0xa5aab9e3, 0xc727, 0x48cd, { 0x8b, 0xbf, 0x42, 0x72, 0x33, 0x85, 0x49, 0x48 }}</td></tr>
<tr class="separator:a7c386cec560a7c06ec6d22c97f0d98f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aa4f83fa80166cbb4069eee539b8f275b" id="r_aa4f83fa80166cbb4069eee539b8f275b"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct__EFI__I2C__HOST__PROTOCOL.html">_EFI_I2C_HOST_PROTOCOL</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="I2cHost_8h.html#aa4f83fa80166cbb4069eee539b8f275b">EFI_I2C_HOST_PROTOCOL</a></td></tr>
<tr class="separator:aa4f83fa80166cbb4069eee539b8f275b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e108e756a1054d3ac403d720ff96329" id="r_a2e108e756a1054d3ac403d720ff96329"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="UefiBaseType_8h.html#a5f446f35c9f907a4f1cf22e794ba338d">EFI_STATUS</a>(<a class="el" href="AArch64_2ProcessorBind_8h.html#aa3998ed6456694d79e9a45f821f379ed">EFIAPI</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="I2cHost_8h.html#a2e108e756a1054d3ac403d720ff96329">EFI_I2C_HOST_PROTOCOL_QUEUE_REQUEST</a>) (<a class="el" href="Base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="Base_8h.html#a0c33b494a68ce28497e7ce8e5e95feff">CONST</a> <a class="el" href="I2cHost_8h.html#aa4f83fa80166cbb4069eee539b8f275b">EFI_I2C_HOST_PROTOCOL</a> *This, <a class="el" href="Base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="AArch64_2ProcessorBind_8h.html#a4a2fc3b6f740e9cca9f895579c167560">UINTN</a> I2cBusConfiguration, <a class="el" href="Base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="AArch64_2ProcessorBind_8h.html#a4a2fc3b6f740e9cca9f895579c167560">UINTN</a> <a class="el" href="Acpi50_8h.html#a0ddd3944d5ab51804c2335233833007c">SlaveAddress</a>, <a class="el" href="Base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="UefiBaseType_8h.html#a7f3111de303d836d8d3711c39363f81a">EFI_EVENT</a> Event <a class="el" href="Base_8h.html#afdff552467cc2d2d5815831e9656cffc">OPTIONAL</a>, <a class="el" href="Base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="structEFI__I2C__REQUEST__PACKET.html">EFI_I2C_REQUEST_PACKET</a> *RequestPacket, <a class="el" href="Base_8h.html#aec78e7a9e90a406a56f859ee456e8eae">OUT</a> <a class="el" href="UefiBaseType_8h.html#a5f446f35c9f907a4f1cf22e794ba338d">EFI_STATUS</a> *I2cStatus <a class="el" href="Base_8h.html#afdff552467cc2d2d5815831e9656cffc">OPTIONAL</a>)</td></tr>
<tr class="separator:a2e108e756a1054d3ac403d720ff96329"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a175ff1b7dc993f9a41aaf8ea8e349a26" id="r_a175ff1b7dc993f9a41aaf8ea8e349a26"><td class="memItemLeft" align="right" valign="top"><a class="el" href="UefiBaseType_8h.html#ad87614428813f71edb2c2d802e9ce2af">EFI_GUID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="I2cHost_8h.html#a175ff1b7dc993f9a41aaf8ea8e349a26">gEfiI2cHostProtocolGuid</a></td></tr>
<tr class="separator:a175ff1b7dc993f9a41aaf8ea8e349a26"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>I2C Host Protocol as defined in the PI 1.3 specification.</p>
<p>This protocol provides callers with the ability to do I/O transactions to all of the devices on the I2C bus.</p>
<p>Copyright (c) 2013 - 2018, Intel Corporation. All rights reserved.<br  />
 This program and the accompanying materials are licensed and made available under the terms and conditions of the BSD License which accompanies this distribution. The full text of the license may be found at <a href="http://opensource.org/licenses/bsd-license.php">http://opensource.org/licenses/bsd-license.php</a></p>
<p>THE PROGRAM IS DISTRIBUTED UNDER THE BSD LICENSE ON AN "AS IS" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS OF ANY KIND, EITHER EXPRESS OR IMPLIED.</p>
<dl class="section user"><dt>Revision Reference:</dt><dd>This protocol is from PI Version 1.3. </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a7c386cec560a7c06ec6d22c97f0d98f3" name="a7c386cec560a7c06ec6d22c97f0d98f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c386cec560a7c06ec6d22c97f0d98f3">&#9670;&#160;</a></span>EFI_I2C_HOST_PROTOCOL_GUID</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EFI_I2C_HOST_PROTOCOL_GUID&#160;&#160;&#160;{ 0xa5aab9e3, 0xc727, 0x48cd, { 0x8b, 0xbf, 0x42, 0x72, 0x33, 0x85, 0x49, 0x48 }}</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="aa4f83fa80166cbb4069eee539b8f275b" name="aa4f83fa80166cbb4069eee539b8f275b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4f83fa80166cbb4069eee539b8f275b">&#9670;&#160;</a></span>EFI_I2C_HOST_PROTOCOL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct__EFI__I2C__HOST__PROTOCOL.html">_EFI_I2C_HOST_PROTOCOL</a> <a class="el" href="I2cHost_8h.html#aa4f83fa80166cbb4069eee539b8f275b">EFI_I2C_HOST_PROTOCOL</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>I2C Host Protocol</p>
<p>The I2C bus driver uses the services of the EFI_I2C_HOST_PROTOCOL to produce an instance of the EFI_I2C_IO_PROTOCOL for each I2C device on an I2C bus.</p>
<p>The EFI_I2C_HOST_PROTOCOL exposes an asynchronous interface to callers to perform transactions to any device on the I2C bus. Internally, the I2C host protocol manages the flow of the I2C transactions to the host controller, keeping them in FIFO order. Prior to each transaction, the I2C host protocol ensures that the switches and multiplexers are properly configured. The I2C host protocol then starts the transaction on the host controller using the EFI_I2C_MASTER_PROTOCOL. </p>

</div>
</div>
<a id="a2e108e756a1054d3ac403d720ff96329" name="a2e108e756a1054d3ac403d720ff96329"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e108e756a1054d3ac403d720ff96329">&#9670;&#160;</a></span>EFI_I2C_HOST_PROTOCOL_QUEUE_REQUEST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="UefiBaseType_8h.html#a5f446f35c9f907a4f1cf22e794ba338d">EFI_STATUS</a>(<a class="el" href="AArch64_2ProcessorBind_8h.html#aa3998ed6456694d79e9a45f821f379ed">EFIAPI</a> * EFI_I2C_HOST_PROTOCOL_QUEUE_REQUEST) (<a class="el" href="Base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="Base_8h.html#a0c33b494a68ce28497e7ce8e5e95feff">CONST</a> <a class="el" href="I2cHost_8h.html#aa4f83fa80166cbb4069eee539b8f275b">EFI_I2C_HOST_PROTOCOL</a> *This, <a class="el" href="Base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="AArch64_2ProcessorBind_8h.html#a4a2fc3b6f740e9cca9f895579c167560">UINTN</a> I2cBusConfiguration, <a class="el" href="Base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="AArch64_2ProcessorBind_8h.html#a4a2fc3b6f740e9cca9f895579c167560">UINTN</a> <a class="el" href="Acpi50_8h.html#a0ddd3944d5ab51804c2335233833007c">SlaveAddress</a>, <a class="el" href="Base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="UefiBaseType_8h.html#a7f3111de303d836d8d3711c39363f81a">EFI_EVENT</a> Event <a class="el" href="Base_8h.html#afdff552467cc2d2d5815831e9656cffc">OPTIONAL</a>, <a class="el" href="Base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="structEFI__I2C__REQUEST__PACKET.html">EFI_I2C_REQUEST_PACKET</a> *RequestPacket, <a class="el" href="Base_8h.html#aec78e7a9e90a406a56f859ee456e8eae">OUT</a> <a class="el" href="UefiBaseType_8h.html#a5f446f35c9f907a4f1cf22e794ba338d">EFI_STATUS</a> *I2cStatus <a class="el" href="Base_8h.html#afdff552467cc2d2d5815831e9656cffc">OPTIONAL</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Queue an I2C transaction for execution on the I2C controller.</p>
<p>This routine must be called at or below TPL_NOTIFY. For synchronous requests this routine must be called at or below TPL_CALLBACK.</p>
<p>The I2C host protocol uses the concept of I2C bus configurations to describe the I2C bus. An I2C bus configuration is defined as a unique setting of the multiplexers and switches in the I2C bus which enable access to one or more I2C devices. When using a switch to divide a bus, due to bus frequency differences, the I2C bus configuration management protocol defines an I2C bus configuration for the I2C devices on each side of the switch. When using a multiplexer, the I2C bus configuration management defines an I2C bus configuration for each of the selector values required to control the multiplexer. See Figure 1 in the I2C -bus specification and user manual for a complex I2C bus configuration.</p>
<p>The I2C host protocol processes all transactions in FIFO order. Prior to performing the transaction, the I2C host protocol calls EnableI2cBusConfiguration to reconfigure the switches and multiplexers in the I2C bus enabling access to the specified I2C device. The EnableI2cBusConfiguration also selects the I2C bus frequency for the I2C device. After the I2C bus is configured, the I2C host protocol calls the I2C master protocol to start the I2C transaction.</p>
<p>When Event is NULL, QueueRequest() operates synchronously and returns the I2C completion status as its return value.</p>
<p>When Event is not NULL, QueueRequest() synchronously returns EFI_SUCCESS indicating that the asynchronously I2C transaction was queued. The values above are returned in the buffer pointed to by I2cStatus upon the completion of the I2C transaction when I2cStatus is not NULL.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">This</td><td>Pointer to an EFI_I2C_HOST_PROTOCOL structure. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">I2cBusConfiguration</td><td>I2C bus configuration to access the I2C device </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">SlaveAddress</td><td>Address of the device on the I2C bus. Set the I2C_ADDRESSING_10_BIT when using 10-bit addresses, clear this bit for 7-bit addressing. Bits 0-6 are used for 7-bit I2C slave addresses and bits 0-9 are used for 10-bit I2C slave addresses. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Event</td><td>Event to signal for asynchronous transactions, NULL for synchronous transactions </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">RequestPacket</td><td>Pointer to an <a class="el" href="structEFI__I2C__REQUEST__PACKET.html">EFI_I2C_REQUEST_PACKET</a> structure describing the I2C transaction </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">I2cStatus</td><td>Optional buffer to receive the I2C transaction completion status</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The asynchronous transaction was successfully queued when Event is not NULL. </td></tr>
    <tr><td class="paramname">EFI_SUCCESS</td><td>The transaction completed successfully when Event is NULL. </td></tr>
    <tr><td class="paramname">EFI_BAD_BUFFER_SIZE</td><td>The RequestPacket-&gt;LengthInBytes value is too large. </td></tr>
    <tr><td class="paramname">EFI_DEVICE_ERROR</td><td>There was an I2C error (NACK) during the transaction. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>RequestPacket is NULL </td></tr>
    <tr><td class="paramname">EFI_NOT_FOUND</td><td>Reserved bit set in the SlaveAddress parameter </td></tr>
    <tr><td class="paramname">EFI_NO_MAPPING</td><td>Invalid I2cBusConfiguration value </td></tr>
    <tr><td class="paramname">EFI_NO_RESPONSE</td><td>The I2C device is not responding to the slave address. EFI_DEVICE_ERROR will be returned if the controller cannot distinguish when the NACK occurred. </td></tr>
    <tr><td class="paramname">EFI_OUT_OF_RESOURCES</td><td>Insufficient memory for I2C transaction </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>The controller does not support the requested transaction. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a175ff1b7dc993f9a41aaf8ea8e349a26" name="a175ff1b7dc993f9a41aaf8ea8e349a26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a175ff1b7dc993f9a41aaf8ea8e349a26">&#9670;&#160;</a></span>gEfiI2cHostProtocolGuid</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="UefiBaseType_8h.html#ad87614428813f71edb2c2d802e9ce2af">EFI_GUID</a> gEfiI2cHostProtocolGuid</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Reference to variable defined in the .DEC file </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
